<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="./dist/common-core.global.js"></script>
    <!-- <script src="https://unpkg.com/vue@3"></script> -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/Mock.js/1.0.0/mock-min.js"></script>
    <script src="https://unpkg.com/element-plus"></script>
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css" />
    <style>
      .item {
        border: 1px solid #a2eef3;
        margin-top: 10px;
        border-radius: 5px;
        padding: 0 10px;
      }
      .item:hover {
        background-color: #205bef;
        color: azure;
        cursor: pointer;
      }
    </style>
  </head>

  <body>
    <div id="app">
      <div style="height: 500px; overflow-y: auto; padding: 20px">
        <el-input type="text" v-model="searchValue" @input="handlerFunct"></el-input>
        <div v-for="(item,index) of arr" :key="item.key" class="item">
          <span>{{index + 1 }}</span> -- <span v-html="item.label"></span>
        </div>
      </div>
      <!-- <el-select v-model="searchValue" placeholder="Select" size="large" style="width: 240px">
        <el-option v-for="item of arr" :key="item.value" :label="item.label" :value="item.value" />
      </el-select> -->
    </div>
  </body>
</html>

<script>
  const { AlgorithmUtils, EnumFactory, StringsUtils, enumStore } = NinCommon
  console.log('ðŸš€ ~ EnumStore:', enumStore)
  const { ref, createApp } = Vue
  const aaaaaa = Mock.mock({
    'data|100': [
      //ç”Ÿæˆ6æ¡æ•°æ® æ•°ç»„
      {
        'id|+1': 1, //ç”Ÿæˆå•†å“idï¼Œè‡ªå¢ž1
        'shopId|+1': 1, //ç”Ÿæˆå•†å“idï¼Œè‡ªå¢ž1
        shopMsg: '@ctitle(10)', //ç”Ÿæˆå•†å“ä¿¡æ¯ï¼Œé•¿åº¦ä¸º10ä¸ªæ±‰å­—
        shopName: '@cname', //ç”Ÿæˆå•†å“å ï¼Œ éƒ½æ˜¯ä¸­å›½äººçš„åå­—
        shopTel: /^1(5|3|7|8)[0-9]{9}$/, //ç”Ÿæˆéšæœºç”µè¯å·
        shopAddress: '@county(true)', //éšæœºç”Ÿæˆåœ°å€
        'shopStar|1-5': 'â˜…', //éšæœºç”Ÿæˆ1-5ä¸ªæ˜Ÿæ˜Ÿ
        'salesVolume|30-1000': 30, //éšæœºç”Ÿæˆå•†å“ä»·æ ¼ åœ¨30-1000ä¹‹é—´
        shopLogo: "@Image('100x40','#c33', '#ffffff','å°åŒ—é¼»')", //ç”Ÿæˆéšæœºå›¾ç‰‡ï¼Œå¤§å°/èƒŒæ™¯è‰²/å­—ä½“é¢œè‰²/æ–‡å­—ä¿¡æ¯
        'food|2': [
          //æ¯ä¸ªå•†å“ä¸­å†éšæœºç”Ÿæˆ2ä¸ªfood
          {
            foodName: '@cname', //foodçš„åå­—
            foodPic: "@Image('100x40','#c33', '#ffffff','å°å¯çˆ±')", //ç”Ÿæˆéšæœºå›¾ç‰‡ï¼Œå¤§å°/èƒŒæ™¯è‰²/å­—ä½“é¢œè‰²/æ–‡å­—ä¿¡æ¯
            'foodPrice|1-100': 20, //ç”Ÿæˆ1-100çš„éšæœºæ•°
            'aname|2': [
              {
                aname: '@cname',
                'aprice|30-60': 20
              }
            ]
          }
        ]
      }
    ]
  })
  const arrEnum = new EnumFactory('name', aaaaaa.data, {
    key: 'id',
    labelKeys: item => {
      return item.shopName + '-' + item.shopMsg
    },
    valueKeys: item => {
      return item.shopName
    }
  })
  for (let index = 0; index < 100; index++) {
    new EnumFactory('name' + index, aaaaaa.data, {
      key: 'id',
      labelKeys: item => {
        return item.shopName + '-' + item.shopMsg
      },
      valueKeys: item => {
        return item.shopName
      }
    })
  }
  const app = createApp({
    setup() {
      console.log(',,,,,,,,,,,,,,,,', enumStore.get('name'))
      const arr = ref(enumStore.get('name').disposedList)
      console.log('ðŸš€ ~ setup ~ arr:', arr)
      const searchValue = ref('')
      function handlerFunct() {
        const fff = arrEnum.searchByTextWithHighlight(searchValue.value)
        console.log('ðŸš€ ~ handlerFunct ~ fff:', fff)
        arr.value = fff;
        if (searchValue.value == '') {
          arr.value = arrEnum.disposedList
        }
        console.log('ðŸš€ ~ setup ~ arrEnum:', arrEnum.paginate({ pageNum: 1, pageSize: 10 }))
      }
      return {
        arr,
        searchValue,
        handlerFunct
      }
    }
  })
  app.use(ElementPlus).mount('#app')
</script>
