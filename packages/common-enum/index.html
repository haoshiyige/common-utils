<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="./dist/common-enum.global.js"></script>
    <!-- <script src="https://unpkg.com/vue@3"></script> -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/Mock.js/1.0.0/mock-min.js"></script>
    <script src="https://unpkg.com/element-plus"></script>
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css" />
    <script src="https://cdn.bootcdn.net/ajax/libs/vue-demi/0.14.8/index.iife.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/pinia/2.1.7/pinia.iife.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/vuex/4.1.0/vuex.global.prod.js"></script>
    <style>
      .item {
        border: 1px solid #a2eef3;
        margin-top: 10px;
        border-radius: 5px;
        padding: 0 10px;
      }
      .item:hover {
        background-color: #205bef;
        color: azure;
        cursor: pointer;
      }
    </style>
  </head>

  <body>
    <div id="app">
      <div style="height: 500px; overflow-y: auto; padding: 20px">
        <el-input type="text" v-model="searchValue" @input="handlerFunct"></el-input>
        <div v-for="(item,index) of arr" :key="item.key" class="item"><span>{{index + 1 }}</span> -- <span v-html="item.label"></span></div>
      </div>
      <!-- 
        <el-select v-model="searchValue" placeholder="Select" size="large" style="width: 240px">
          <el-option v-for="item of arr" :key="item.value" :label="item.label" :value="item.value" />
        </el-select> 
      -->
    </div>
  </body>
</html>

<script>
  const { defineEnum, enumStore, createPiniaPlugin, getEnumFactory } = NinEnum
  console.log('ğŸš€ ~ NinEnum:', NinEnum)
  const { createPinia, defineStore } = Pinia
  const { ref, createApp } = Vue
  const piniaStore = createPinia()
  const aaaaaa = Mock.mock({
    'data|100': [
      //ç”Ÿæˆ6æ¡æ•°æ® æ•°ç»„
      {
        'id|+1': 1, //ç”Ÿæˆå•†å“idï¼Œè‡ªå¢1
        'shopId|+1': 1, //ç”Ÿæˆå•†å“idï¼Œè‡ªå¢1
        shopMsg: '@ctitle(10)', //ç”Ÿæˆå•†å“ä¿¡æ¯ï¼Œé•¿åº¦ä¸º10ä¸ªæ±‰å­—
        shopName: '@cname', //ç”Ÿæˆå•†å“å ï¼Œ éƒ½æ˜¯ä¸­å›½äººçš„åå­—
        shopTel: /^1(5|3|7|8)[0-9]{9}$/, //ç”Ÿæˆéšæœºç”µè¯å·
        shopAddress: '@county(true)', //éšæœºç”Ÿæˆåœ°å€
        'shopStar|1-5': 'â˜…', //éšæœºç”Ÿæˆ1-5ä¸ªæ˜Ÿæ˜Ÿ
        'salesVolume|30-1000': 30, //éšæœºç”Ÿæˆå•†å“ä»·æ ¼ åœ¨30-1000ä¹‹é—´
        shopLogo: "@Image('100x40','#c33', '#ffffff','å°åŒ—é¼»')", //ç”Ÿæˆéšæœºå›¾ç‰‡ï¼Œå¤§å°/èƒŒæ™¯è‰²/å­—ä½“é¢œè‰²/æ–‡å­—ä¿¡æ¯
        'food|2': [
          //æ¯ä¸ªå•†å“ä¸­å†éšæœºç”Ÿæˆ2ä¸ªfood
          {
            foodName: '@cname', //foodçš„åå­—
            foodPic: "@Image('100x40','#c33', '#ffffff','å°å¯çˆ±')", //ç”Ÿæˆéšæœºå›¾ç‰‡ï¼Œå¤§å°/èƒŒæ™¯è‰²/å­—ä½“é¢œè‰²/æ–‡å­—ä¿¡æ¯
            'foodPrice|1-100': 20, //ç”Ÿæˆ1-100çš„éšæœºæ•°
            'aname|2': [
              {
                aname: '@cname',
                'aprice|30-60': 20
              }
            ]
          }
        ]
      }
    ]
  })

  for (let index = 0; index < 10; index++) {
    defineEnum('name' + index, aaaaaa.data, {
      key: 'id',
      labelKeys: item => {
        return item.shopName + '-' + item.shopMsg
      },
      valueKeys: item => {
        return item.shopName
      }
    })
  }

  const app = createApp({
    setup() {
      const arr = ref(getEnumFactory('name1'))
      const searchValue = ref('')
      console.log('ğŸš€ ~ enumStore:', enumStore.getKeys())
      console.log('ğŸš€ ~ enumStore:', enumStore.getValues('name1'))
      console.log('ğŸš€ ~ enumStore:', enumStore)
      function handlerFunct() {
        const fff = arr.searchByTextWithHighlight(searchValue.value)
        arr.value = fff
        if (searchValue.value == '') {
          arr.value = arr.disposedList
        }
      }
      return {
        arr,
        searchValue,
        handlerFunct
      }
    }
  })
  app.use(piniaStore).use(ElementPlus).mount('#app')
</script>
